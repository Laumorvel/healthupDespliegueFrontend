"use strict";(self.webpackChunkhealthup=self.webpackChunkhealthup||[]).push([[635],{5635:(J,u,s)=>{s.r(u),s.d(u,{SignUpModule:()=>I});var p=s(9808),m=s(5358),n=s(2382),Z=s(5226),b=s.n(Z),e=s(1223),U=s(9103),c=s(4004),d=s(262),g=s(9646),f=s(2340),h=s(520);let S=(()=>{class o{constructor(r){this.http=r,this.baseUrl=f.N.baseUrl}validate(r){return this.compruebaEmail(r.value).pipe((0,c.U)(a=>null!=a.email?{emailIndicado:!0}:null),(0,d.K)(a=>(0,g.of)(null)))}compruebaEmail(r){return this.http.get(`${this.baseUrl}/auth/user?email=${r}`)}}return o.\u0275fac=function(r){return new(r||o)(e.LFG(h.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),x=(()=>{class o{constructor(r){this.http=r,this.baseUrl=f.N.baseUrl}validate(r){return this.compruebaUsername(r.value).pipe((0,c.U)(a=>null!=a.username?{usernameCogido:!0}:null),(0,d.K)(a=>(0,g.of)(null)))}compruebaUsername(r){return this.http.get(`${this.baseUrl}/auth/user?username=${r}`)}}return o.\u0275fac=function(r){return new(r||o)(e.LFG(h.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var T=s(410);let v=(()=>{class o{constructor(){this.nombre="",this.sendObjetivos=new e.vpe,this.objetivos=[],this.rangeFood=1,this.rangeSport=1}ngOnInit(){}enviaObjetivos(){this.objetivos.push(this.rangeFood,this.rangeSport),console.log(this.objetivos),this.sendObjetivos.emit(this.objetivos)}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-quiz"]],inputs:{nombre:"nombre"},outputs:{sendObjetivos:"sendObjetivos"},decls:24,vars:5,consts:[[1,"text-center","my-5"],[1,"row"],[1,"form-group","text-center","col-md-6"],[1,"ranges"],["for","formControlRange",1,"mb-3"],[1,"rangeFood"],[1,"number","mb-3"],["type","range","name","rangeFood","id","rangeFood","min","1","max","7","step","1","value","1",1,"form-control-range",3,"ngModel","ngModelChange"],["for","formControlRange",1,"my-3"],[1,"rangeSport"],["type","range","name","rangeSport","id","rangeSport","min","1","max","7","step","1","value","1",1,"form-control-range",3,"ngModel","ngModelChange"],[1,"form-group","text-center"],[1,"col"],["type","submit",1,"btn","btn-primary","float-center","my-5",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"form"),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e.TgZ(6,"label",4),e._uU(7,"Healthy meals per week"),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e._uU(10),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(l){return t.rangeFood=l}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",2),e.TgZ(13,"label",8),e._uU(14,"Workouts per week"),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"div",6),e._uU(17),e.qZA(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(l){return t.rangeSport=l}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",1),e.TgZ(20,"div",11),e.TgZ(21,"div",12),e.TgZ(22,"button",13),e.NdJ("click",function(){return t.enviaObjetivos()}),e._uU(23," Signup "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.xp6(1),e.hij(" Hi, ",t.nombre,"! Set your weekly goals to complete your profile\n"),e.xp6(9),e.hij(" ",t.rangeFood," "),e.xp6(1),e.Q6J("ngModel",t.rangeFood),e.xp6(6),e.hij(" ",t.rangeSport," "),e.xp6(1),e.Q6J("ngModel",t.rangeSport))},directives:[n._Y,n.JL,n.F,n.eT,n.Fj,n.JJ,n.On],styles:['@import"https://fonts.googleapis.com/css?family=Dosis:700";@import"https://fonts.googleapis.com/css2?family=Alfa+Slab+One&family=Dancing+Script&family=Roboto+Serif:wght@100&family=Yellowtail&display=swap";body[_ngcontent-%COMP%]{font-family:Dosis,Helvetica,Arial,sans-serif;background:#ecf0f1;color:#34495e;padding-top:40px;text-shadow:white 1px 1px 1px}.value[_ngcontent-%COMP%]{border-bottom:4px dashed #bdc3c7;text-align:center;font-weight:700;font-size:10em;width:300px;height:100px;line-height:60px;margin:40px auto;letter-spacing:-.07em;text-shadow:white 2px 2px 2px}input[type=range][_ngcontent-%COMP%]{display:block;-webkit-appearance:none;background-color:#bdc3c7;width:300px;height:5px;border-radius:5px;margin:0 auto;outline:0}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;background-color:#e74c3c;width:30px;height:30px;border-radius:50%;border:2px solid white;cursor:pointer;-webkit-transition:.3s ease-in-out;transition:.3s ease-in-out}\\200b[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:hover{background-color:#fff;border:2px solid #e74c3c}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:active{transform:scale(1.6)}.btn[_ngcontent-%COMP%]{transition:all .5s ease;width:30%;border-radius:30px;color:teal;font-weight:600;background-color:#fff;border:1px solid #008080;margin-top:1.5em;margin-bottom:1em}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{background-color:#026670;color:#fff}.number[_ngcontent-%COMP%]{font-size:50px;font-family:"Roboto Serif",sans-serif}']}),o})();function C(o,i){if(1&o&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.nameError," ")}}function y(o,i){if(1&o&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.surnameError," ")}}function q(o,i){if(1&o&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.emailErrorMsg," ")}}function w(o,i){if(1&o&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.usernameError," ")}}function A(o,i){1&o&&(e.TgZ(0,"span",17),e._uU(1," Passwords must contain at least 6 characters. "),e.qZA())}function _(o,i){1&o&&(e.TgZ(0,"span",17),e._uU(1," Both passwords must be equal. "),e.qZA())}function F(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"app-quiz",18),e.NdJ("sendObjetivos",function(a){return e.CHM(r),e.oxw().submitFormulario(a)}),e.qZA(),e.qZA()}if(2&o){const r=e.oxw();e.xp6(1),e.Q6J("nombre",r.miFormulario.value.name)}}const N=[{path:"",component:(()=>{class o{constructor(r,t,a,l,O,j){this.fb=r,this.validatorService=t,this.emailValidator=a,this.usernameValidator=l,this.authService=O,this.router=j,this.miFormulario=this.fb.group({name:[,[n.kI.required,n.kI.pattern(this.validatorService.namePattern)]],surname:[,[n.kI.required,n.kI.pattern(this.validatorService.namePattern)]],email:[,[n.kI.required,n.kI.pattern(this.validatorService.emailPattern)],[this.emailValidator]],username:[,[n.kI.required,n.kI.min(0)],[this.usernameValidator]],password:[,[n.kI.required,n.kI.min(6)]],password2:[,[n.kI.required]]},{validators:[this.validatorService.camposIguales("password","password2")]})}get nameError(){var r;const t=null===(r=this.miFormulario.get("name"))||void 0===r?void 0:r.errors;return t.required?"Name required":t.pattern?"Numbers are not allowed":""}get surnameError(){var r;const t=null===(r=this.miFormulario.get("surname"))||void 0===r?void 0:r.errors;return t.required?"Surname required":t.pattern?"Numbers are not allowed":""}get emailErrorMsg(){var r;const t=null===(r=this.miFormulario.get("email"))||void 0===r?void 0:r.errors;return t.required?"Email required":t.pattern?"An email was expected":t.emailIndicado?"This email is already in use":""}get usernameError(){var r;const t=null===(r=this.miFormulario.get("username"))||void 0===r?void 0:r.errors;return t.required?"User required":t.usernameCogido?"This username is already in use":""}ngOnInit(){this.miFormulario.reset({name:"caca",surname:"caca",email:"caca@caca.ca",username:"caca",password:"cacacaca",password2:"cacacaca"})}campoNoValido(r){var t,a;return(null===(t=this.miFormulario.get(r))||void 0===t?void 0:t.invalid)&&(null===(a=this.miFormulario.get(r))||void 0===a?void 0:a.touched)}submitFormulario(r){let t=this.miFormulario.value;t.objetivoFoodSemanal=r[0],t.objetivoSportSemanal=r[1],this.authService.register(t).subscribe({next:a=>{localStorage.setItem("jwt",JSON.stringify(a.access_token)),this.getUser()},error:a=>{b().fire("Error",a.error.message,"error")}}),this.miFormulario.reset({name:"",surname:"",email:"",username:"",password:""})}getUser(){this.authService.loginGetUser().subscribe(r=>{console.log(r),localStorage.setItem("user",JSON.stringify(r)),this.router.navigateByUrl(`/userDashboard/${r.id}`)})}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(n.qu),e.Y36(U.o),e.Y36(S),e.Y36(x),e.Y36(T.u),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sign-up"]],decls:38,vars:8,consts:[[1,"text-center","mt-4"],["autocomplete","off",1,"m-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group","col-md-6"],["for","name"],["type","text","formControlName","name","name","mame",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["for","surname"],["type","text","formControlName","surname",1,"form-control"],["for","email"],["type","email","debounce","3000","formControlName","email",1,"form-control"],["for","username"],["type","text","formControlName","username",1,"form-control"],[1,"col-form-label"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","password2",1,"form-control"],[4,"ngIf"],[1,"form-text","text-danger"],[3,"nombre","sendObjetivos"]],template:function(r,t){1&r&&(e.TgZ(0,"h1",0),e._uU(1,"SIGN UP FORM"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(l){return t.submitFormulario(l)}),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e.TgZ(6,"label",4),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",5),e.YNc(9,C,2,1,"span",6),e.qZA(),e.TgZ(10,"div",3),e.TgZ(11,"label",7),e._uU(12,"Surname"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,y,2,1,"span",6),e.qZA(),e.qZA(),e.TgZ(15,"div",2),e.TgZ(16,"div",3),e.TgZ(17,"label",9),e._uU(18,"Email"),e.qZA(),e._UZ(19,"input",10),e.YNc(20,q,2,1,"span",6),e.qZA(),e.TgZ(21,"div",3),e.TgZ(22,"label",11),e._uU(23,"Username"),e.qZA(),e._UZ(24,"input",12),e.YNc(25,w,2,1,"span",6),e.qZA(),e.qZA(),e.TgZ(26,"div",2),e.TgZ(27,"div",3),e.TgZ(28,"label",13),e._uU(29,"Password"),e.qZA(),e._UZ(30,"input",14),e.YNc(31,A,2,0,"span",6),e.qZA(),e.TgZ(32,"div",3),e.TgZ(33,"label",13),e._uU(34,"Confirm Password"),e.qZA(),e._UZ(35,"input",15),e.YNc(36,_,2,0,"span",6),e.qZA(),e.qZA(),e.YNc(37,F,2,1,"div",16),e.qZA()),2&r&&(e.xp6(3),e.Q6J("formGroup",t.miFormulario),e.xp6(6),e.Q6J("ngIf",t.campoNoValido("name")),e.xp6(5),e.Q6J("ngIf",t.campoNoValido("surname")),e.xp6(6),e.Q6J("ngIf",t.campoNoValido("email")),e.xp6(5),e.Q6J("ngIf",t.campoNoValido("username")),e.xp6(6),e.Q6J("ngIf",t.campoNoValido("password")),e.xp6(5),e.Q6J("ngIf",t.campoNoValido("password2")),e.xp6(1),e.Q6J("ngIf",t.miFormulario.valid))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,p.O5,v],styles:[".form-group[_ngcontent-%COMP%]{margin-top:2em}"]}),o})()},{path:"quiz",component:v}];let M=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.Bz.forChild(N)],m.Bz]}),o})(),I=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,M,n.UX,n.u5]]}),o})()}}]);